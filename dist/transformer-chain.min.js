(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.transformer=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";module.exports={project:require("./plugins/project"),filter:require("./plugins/filter"),default:require("./plugins/default"),validate:require("./plugins/validate")}},{"./plugins/default":2,"./plugins/filter":3,"./plugins/project":4,"./plugins/validate":5}],2:[function(require,module,exports){"use strict";function handleObject(object,schema,fullObject,path){var resultObject={};Object.keys(schema).forEach(function(propertyName){if(propertyName.startsWith("$")){return}var propertyValue=object[propertyName];var propertyPath=path.concat(propertyName);var propertySchema=schema[propertyName];if(propertySchema instanceof Function){propertySchema=propertySchema(propertyValue,object,fullObject,propertyPath)}var newPropertyValue=propertyValue;if(propertySchema instanceof Object){if(propertySchema.$default!==undefined&&newPropertyValue===undefined){newPropertyValue=propertySchema.$default}var itemsSchema=propertySchema.$items||propertySchema[0];if(itemsSchema&&Object.keys(itemsSchema).some(function(p){return!p.startsWith("$")})&&newPropertyValue instanceof Array){var arraySchema=Array(newPropertyValue.length).fill(itemsSchema);var handledArrayLikeObject=handleObject(newPropertyValue,arraySchema,fullObject,propertyPath);newPropertyValue=Object.keys(handledArrayLikeObject).map(function(key){return handledArrayLikeObject[key]})}else if(Object.keys(propertySchema).some(function(p){return!p.startsWith("$")})&&newPropertyValue instanceof Object){newPropertyValue=handleObject(newPropertyValue,propertySchema,fullObject,propertyPath)}}resultObject[propertyName]=newPropertyValue});return resultObject}module.exports=function(object,schema){return handleObject(object,schema,object,[])}},{}],3:[function(require,module,exports){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var builtInFilters=Object.assign({},require("common-filters"));function handleObject(object,schema,fullObject,path){var resultObject={};Object.keys(schema).forEach(function(propertyName){if(propertyName.startsWith("$")){return}var propertyValue=object[propertyName];var propertyPath=path.concat(propertyName);var propertySchema=schema[propertyName];if(propertySchema instanceof Function){propertySchema=propertySchema(propertyValue,object,fullObject,propertyPath)}var newPropertyValue=propertyValue;if(propertySchema instanceof Object){if(propertySchema.$filter){[].concat(propertySchema.$filter).forEach(function(item){var filter=void 0;var options={};if(item instanceof Function){filter=item}else if(item instanceof Array){var _item=_slicedToArray(item,2);filter=_item[0];var _item$=_item[1];options=_item$===undefined?{}:_item$;if(typeof filter==="string"){filter=builtInFilters[filter]}}else{filter=builtInFilters[item]}if(!(filter instanceof Function)){throw new Error("Unknown filter "+item)}newPropertyValue=filter(newPropertyValue,options,object,fullObject,propertyPath)})}var itemsSchema=propertySchema.$items||propertySchema[0];if(itemsSchema&&newPropertyValue instanceof Array){var arraySchema=Array(newPropertyValue.length).fill(itemsSchema);var handledArrayLikeObject=handleObject(newPropertyValue,arraySchema,fullObject,propertyPath);newPropertyValue=Object.keys(handledArrayLikeObject).map(function(key){return handledArrayLikeObject[key]})}else if(Object.keys(propertySchema).some(function(p){return!p.startsWith("$")})&&newPropertyValue instanceof Object){newPropertyValue=handleObject(newPropertyValue,propertySchema,fullObject,propertyPath)}}resultObject[propertyName]=newPropertyValue});return resultObject}var plugin=function plugin(object,schema){return handleObject(object,schema,object,[])};plugin.filters=builtInFilters;module.exports=plugin},{"common-filters":8}],4:[function(require,module,exports){"use strict";function handleObject(object,schema,fullObject,path){var resultObject={};Object.keys(schema).forEach(function(propertyName){if(propertyName.startsWith("$")){return}var propertyValue=object[propertyName];var propertyPath=path.concat(propertyName);var propertySchema=schema[propertyName];if(propertySchema instanceof Function){propertySchema=propertySchema(propertyValue,object,fullObject,propertyPath)}var newPropertyValue=void 0;if(propertySchema===true){newPropertyValue=propertyValue}else if(propertySchema instanceof Object){newPropertyValue=propertyValue;var itemsSchema=propertySchema.$items||propertySchema[0];if(itemsSchema&&Object.keys(itemsSchema).some(function(p){return!p.startsWith("$")})&&propertyValue instanceof Array){var arraySchema=Array(newPropertyValue.length).fill(itemsSchema);var handledArrayLikeObject=handleObject(newPropertyValue,arraySchema,fullObject,propertyPath);newPropertyValue=Object.keys(handledArrayLikeObject).map(function(key){return handledArrayLikeObject[key]})}else if(Object.keys(propertySchema).some(function(p){return!p.startsWith("$")})&&propertyValue instanceof Object){newPropertyValue=handleObject(propertyValue,propertySchema,fullObject,propertyPath)}}if(newPropertyValue!==undefined){resultObject[propertyName]=newPropertyValue}});return resultObject}module.exports=function(object,schema){return handleObject(object,schema,object,[])}},{}],5:[function(require,module,exports){"use strict";var validy=require("validy");var validate=function validate(object,schema,options){options=Object.assign({},options,{reject:true});return validy(object,schema,options).then(function(){return object})};validate.validators=validy.validators;validate.formatters=validy.formatters;validate.ValidationError=validy.ValidationError;module.exports=validate},{validy:23}],6:[function(require,module,exports){"use strict";var cloneDeep=require("lodash.clonedeep");var Transformer=require("./transformer");var plugins=require("./plugins");function transformer(object,schema){var clonedObject=cloneDeep(object);return new Transformer(clonedObject,schema)}transformer.plugins=plugins;module.exports=transformer},{"./plugins":1,"./transformer":7,"lodash.clonedeep":11}],7:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var plugins=require("./plugins");var Transformer=function Transformer(object,schema){var _this=this;_classCallCheck(this,Transformer);this.result=object;Object.keys(plugins).forEach(function(pluginName){var plugin=plugins[pluginName];_this[pluginName]=function(options){if(_this.result.then instanceof Function){_this.result=_this.result.then(function(result){return plugin(result,schema,options)})}else{_this.result=plugin(_this.result,schema,options)}return _this}})};module.exports=Transformer},{"./plugins":1}],8:[function(require,module,exports){"use strict";var filters={toObject:function toObject(value){return assign({},value)},toArray:function toArray(value){if(!isDefined(value)){return[]}if(isPlainObject(value)){return Object.keys(value).map(function(key){return value[key]})}return Array.prototype.slice.call(value)},castArray:function castArray(value){if(value===undefined){return[]}if(isArray(value)){return value}return[value]},toNumber:toNumber,toFinite:toFinite,toInteger:function toInteger(value){value=toFinite(value);var remainder=value%1;return remainder?value-remainder:value},toString:function toString(value){if(!isDefined(value)){return""}var result=String(value);return result=="0"&&1/value==-1/0?"-0":result},toDate:function toDate(value,format){var date=new Date(isDateTime(value)?value:0);return date},toBoolean:toBoolean,toUndefined:function toUndefined(value){if(toBoolean(value)){return value}},round:function round(value,_round){if(isNumber(value)&&(isNumber(_round)||isString(_round))){value=Number(Math.round(value+"e"+-_round)+"e"+_round)}return value},range:function range(value,options){if(!isNumber(value)||value<options.from||value>options.to){return options.default}return value},trim:function trim(value){if(isString(value)){return value.trim()}return value},prefix:function prefix(value,_prefix){if(isString(value)){return _prefix+value}return value},postfix:function postfix(value,_postfix){if(isString(value)){return value+_postfix}return value},shorten:function shorten(value,length){if(isString(value)&&value.length>length){return value.substring(0,length<=3?length:length-3)+(length<=3?"":"...")}return value},toLowerCase:function toLowerCase(value){if(isString(value)){return value.toLowerCase()}return value},toUpperCase:function toUpperCase(value){if(isString(value)){return value.toUpperCase()}return value},toCamelCase:function toCamelCase(value){if(isString(value)){return value.replace(/^([A-Z])|[\s\-_](\w)/g,function(match,p1,p2){if(p2)return p2.toUpperCase();return p1.toLowerCase()})}return value},toSnakeCase:function toSnakeCase(value){return value},replace:function replace(value,options){var replacement=typeof options.replacement==="function"?options.replacement:function(){return options.replacement};if(isString(value)){try{return value.replace(new RegExp(options.pattern),replacement)}catch(e){console.error("replace error",e);return value}}return value},split:function split(value,seperator){if(isString(value)){return value.split(seperator)}return value},indexOf:function indexOf(value){if(isString(value)){}return value},format:function format(value){if(isString(value)){}return value},html2string:function html2string(value){if(isString(value)){}return value},sanitizeEmail:function sanitizeEmail(value){if(isString(value)){}return value},sanitizeUrl:function sanitizeUrl(value){if(isString(value)){}return value},sanitizeString:function sanitizeString(value){if(isString(value)){}return value},hex2bin:function hex2bin(value){if(isString(value)){}return value},join:function join(value,seperator){if(isArray(value)){return value.join(seperator)}return value},reverse:function reverse(value){if(isArray(value)||isString(value)){return value.reverse()}return value},slice:function slice(value,options){if(isArray(value)||isString(value)){return value.slice(options.begin,options.end)}return value},compact:function compact(value){}};function assign(){for(var i=1;i<arguments.length;i++){for(var k in arguments[i]){if(arguments[i].hasOwnProperty(k))arguments[0][k]=arguments[i][k]}}return arguments[0]}function toBoolean(value){if(value==="false"||value==="undefined"||value==="null"||value==="off"||value==="no"||toNumber(value)<=0){return false}return Boolean(value)}function toNumber(value){return Number(value)}function toFinite(value){value=toNumber(value);return isNaN(value)?0:value}function isNumber(value){return typeof value==="number"&&!isNaN(value)}function isFunction(value){return typeof value==="function"}function isInteger(value){return isNumber(value)&&value%1===0}function isBoolean(value){return typeof value==="boolean"}function isObject(obj){return obj===Object(obj)}function isPlainObject(value){return{}.toString.call(value)==="[object Object]"}function isArray(value){return{}.toString.call(value)==="[object Array]"}function isDate(obj){return obj instanceof Date}function isDateTime(value){return!isNaN(Date.parse(value))}function isString(value){return typeof value==="string"}function isDefined(obj){return obj!==null&&obj!==undefined}function addFilter(name,filter,params){this[name]=function(value,arg,options){var args=Array.prototype.slice.call(arguments,2);var values=[value];if(arguments[1]===undefined||{}.toString.call(arguments[1])==="[object Object]"){options=arguments[1]||{}}else{options=arguments[2]||{};options.arg=arguments[1];args.shift()}if(options.hasOwnProperty("arg")){values.push(options.arg)}values.push(options);return filter.apply(this,values.concat(args))}}function Filters(){}Filters.prototype.add=function(filterName,filter,params){var _this=this;if(typeof filterName==="string"){addFilter.call(this,filterName,filter,params)}else{Object.keys(filterName).forEach(function(key){return addFilter.call(_this,key,filterName[key],filter)})}return this};module.exports=(new Filters).add(filters)},{}],9:[function(require,module,exports){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var toDateTime=require("normalize-date");var validators={custom:function custom(value,arg,options){if(typeof arg==="function"){return arg(value,options)}},required:function required(value){if(!exists(value)){return"Is required"}},presence:"required",notEmpty:function notEmpty(value){if(isEmpty(value)){return"Can't be blank"}},equal:function equal(value,arg,options){if(exists(value)&&!deepEqual(value,arg,options.strict)){return"Must be equal %{arg}"}},confirm:function confirm(value,options){if(exists(value)&&!deepEqual(toObject(value)[options.key],toObject(value)[options.comparedKey],options.strict)){return"%{key} must be equal %{comparedKey}"}},object:function object(value){if(isDefined(value)&&!isPlainObject(value)){return"Must be an object"}},array:function array(value){if(isDefined(value)&&!isArray(value)){return"Must be an array"}},string:function string(value){if(isDefined(value)&&!isString(value)){return"Must be a string"}},number:function number(value){if(isDefined(value)&&!isNumber(value)){return"Must be a number"}},integer:function integer(value){if(isDefined(value)&&!isInteger(value)){return"Must be an integer"}},date:function date(value){if(isDefined(value)&&!isDateTime(value)){return"Must be a valid date"}},boolean:function boolean(value){if(isDefined(value)&&!isBoolean(value)){return"Must be a boolean"}},function:function _function(value){if(isDefined(value)&&!isFunction(value)){return"Must be a function"}},null:function _null(value){if(isDefined(value)&&value!==null){return"Must be a null"}},max:function max(value,arg,options){if(exists(value)&&!(options.exclusive?toNumber(value)<arg:toNumber(value)<=arg)){return options.exclusive?"Must be less %{arg}":"Must be less or equal %{arg}"}},min:function min(value,arg,options){if(exists(value)&&!(options.exclusive?toNumber(value)>arg:toNumber(value)>=arg)){return options.exclusive?"Must be more %{arg}":"Must be more or equal %{arg}"}},range:function range(value,options){if(exists(value)){if(!(options.exclusiveFrom||options.exclusive?toNumber(value)>options.from:toNumber(value)>=options.from)){return{error:"range.less",message:options.lessMessage||"Must be from %{from} to %{to}"}}else if(!(options.exclusiveTo||options.exclusive?toNumber(value)<options.to:toNumber(value)<=options.to)){return{error:"range.many",message:options.manyMessage||"Must be from %{from} to %{to}"}}}},odd:function odd(value){if(exists(value)&&toNumber(value)%2!==1){return"Must be odd"}},even:function even(value){if(exists(value)&&toNumber(value)%2!==0){return"Must be even"}},divisible:function divisible(value,arg){if(exists(value)&&toNumber(value)%arg!==0){return"Must be divisible by %{arg}"}},maxLength:function maxLength(value,arg){if(exists(value)&&toArray(value).length>arg){return"Length must be less or equal %{arg}"}},minLength:function minLength(value,arg){if(exists(value)&&toArray(value).length<arg){return"Length must be more or equal %{arg}"}},equalLength:function equalLength(value,arg){if(exists(value)&&toArray(value).length!==arg){return"Length must be equal %{arg}"}},rangeLength:function rangeLength(value,options){if(exists(value)){if(toArray(value).length>options.to){return{error:"rangeLength.many",message:options.manyMessage||"Length must be from %{from} to %{to}"}}else if(toArray(value).length<options.from){return{error:"rangeLength.less",message:options.lessMessage||"Length must be from %{from} to %{to}"}}}},maxSize:function maxSize(value,arg,options){var valueSize=byteLength(value,options);if(exists(value)&&valueSize>arg){return{message:"Size must be less %{arg}",size:valueSize}}},minSize:function minSize(value,arg,options){var valueSize=byteLength(value,options);if(exists(value)&&valueSize<arg){return{message:"Size must be more %{arg}",size:valueSize}}},equalSize:function equalSize(value,arg,options){var valueSize=byteLength(value,options);if(exists(value)&&valueSize!==arg){return{message:"Length must be equal %{arg}",size:valueSize}}},rangeSize:function rangeSize(value,options){var valueSize=byteLength(value,options);if(exists(value)){if(valueSize<options.from){return{error:"rangeSize.less",message:options.lessMessage||"Size must be from %{from} to %{to}",size:valueSize}}else if(valueSize>options.to){return{error:"rangeSize.many",message:options.manyMessage||"Size must be from %{from} to %{to}",size:valueSize}}}},pattern:function pattern(value,arg){if(exists(value)&&!new RegExp(arg).test(toString(value))){return"Does not match the pattern %{arg}"}},inclusion:function inclusion(value,arg){if(exists(value)&&!contains(arg,value)){return"%{value} is not allowed"}},exclusion:function exclusion(value,arg){if(exists(value)&&contains(arg,value,true)){return"%{value} is restricted"}},maxDateTime:function maxDateTime(value,arg,options){if(exists(value)&&!(options.exclusive?toDateTime(value)<toDateTime(arg):toDateTime(value)<=toDateTime(arg))){return"Must be earlier than %{arg}"}},maxDate:function maxDate(value,arg,options){if(exists(value)&&!(options.exclusive?toDate(value)<toDate(arg):toDate(value)<=toDate(arg))){return"Must be earlier than %{arg}"}},minDateTime:function minDateTime(value,arg,options){if(exists(value)&&!(options.exclusive?toDateTime(value)>toDateTime(arg):toDateTime(value)>=toDateTime(arg))){return"Must be no earlier than %{arg}"}},minDate:function minDate(value,arg,options){if(exists(value)&&!(options.exclusive?toDate(value)>toDate(arg):toDate(value)>=toDate(arg))){return"Must be no earlier than %{arg}"}},equalDateTime:function equalDateTime(value,arg){if(exists(value)&&toDateTime(value).valueOf()!==toDateTime(arg).valueOf()){return"Must be equal %{arg}"}},equalDate:function equalDate(value,arg){if(exists(value)&&toDate(value).valueOf()!==toDate(arg).valueOf()){return"Must be equal %{arg}"}},rangeDateTime:function rangeDateTime(value,options){if(exists(value)){if(!(options.exclusiveFrom||options.exclusive?toDateTime(value)>toDateTime(options.from):toDateTime(value)>=toDateTime(options.from))){return{error:"rangeDateTime.many",message:options.manyMessage||"Must be from %{from} to %{to}"}}else if(!(options.exclusiveTo||options.exclusive?toDateTime(value)<toDateTime(options.to):toDateTime(value)<=toDateTime(options.to))){return{error:"rangeDateTime.less",message:options.lessMessage||"Must be from %{from} to %{to}"}}}},rangeDate:function rangeDate(value,options){if(exists(value)){if(!(options.exclusiveFrom||options.exclusive?toDate(value)>toDate(options.from):toDate(value)>=toDate(options.from))){return{error:"rangeDate.many",message:options.manyMessage||"Must be from %{from} to %{to}"}}else if(!(options.exclusiveTo||options.exclusive?toDate(value)<toDate(options.to):toDate(value)<=toDate(options.to))){return{error:"rangeDate.less",message:options.lessMessage||"Must be from %{from} to %{to}"}}}},email:function email(value){var PATTERN=/^[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i;if(exists(value)&&!PATTERN.exec(toString(value))){return"Must be a valid email"}},url:function url(value,options){if(exists(value)){var protocols=options.protocols||["http","https"];var regex="^"+"(?:(?:"+protocols.join("|")+"):\\/\\/)"+"(?:\\S+(?::\\S*)?@)?";regex+="(?:";var tld="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(options.allowLocal){tld+="?"}else{regex+="(?!10(?:\\.\\d{1,3}){3})"+"(?!127(?:\\.\\d{1,3}){3})"+"(?!169\\.254(?:\\.\\d{1,3}){2})"+"(?!192\\.168(?:\\.\\d{1,3}){2})"+"(?!172"+"\\.(?:1[6-9]|2\\d|3[0-1])"+"(?:\\.\\d{1,3})"+"{2})"}var hostname="(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)"+"(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*"+tld+")";regex+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])"+"(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}"+"(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))"+"|"+hostname+"(?::\\d{2,5})?"+"(?:\\/[^\\s]*)?"+"$";var PATTERN=new RegExp(regex,"i");if(!PATTERN.exec(toString(value))){return"is not a valid url"}}},ipAddress:function ipAddress(value,options){if(exists(value)){var IPV4_REGEXP=/^\s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\s*$/;var IPV6_REGEXP=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;var HOSTNAME_REGEXP=/^\s*((?=.{1,255}$)(?=.*[A-Za-z].*)[0-9A-Za-z](?:(?:[0-9A-Za-z]|\b-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|\b-){0,61}[0-9A-Za-z])?)*)\s*$/;var regExps={ipv4:IPV4_REGEXP,ipv6:IPV6_REGEXP,hostname:HOSTNAME_REGEXP};var isError=!Object.keys(regExps).some(function(key){if(options[key]||options[key]===undefined){return regExps[key].test(toString(value))}});var ipv4=options.ipv4;var ipv6=options.ipv6;var hostname=options.hostname;if(isError){if(ipv4&&!ipv6&&!hostname){return{error:"ip.v4",message:options.ipv4Message||"Must be a valid IPv4 address"}}if(ipv6&&!ipv4&&!hostname){return{error:"ip.v6",message:options.ipv6Message||"Must be a valid IPv6 address"}}if(hostname&&!ipv4&&!ipv6){return{error:"ip.hostname",message:options.hostnameMessage||"Must be a valid hostname"}}if(ipv6&&ipv4&&!hostname){return{error:"ip.address",message:options.addressMessage||"Must be a valid IP address"}}return"Must be a valid IP address or hostname"}}},accept:function accept(files,arg,options){files=toArray(options.files||files);if(exists(files)){var allowedTypes=(arg||"").split(",").map(function(type){return type.trim().replace("*","")});var isError=files.some(function(file){return allowedTypes.every(function(type){if(type[0]==="."){return"."+((file.name||"").split(".").pop()||"").toLowerCase()!==type}else{return(file.type||"").indexOf(type)===-1}})});if(isError){return"File must be a %{arg}"}}},minFileSize:function minFileSize(files,arg,options){files=toArray(options.files||files);if(exists(files)&&!files.every(function(file){return toNumber(file.size)>=arg})){return"File size must be more or equal %{arg} bytes"}},maxFileSize:function maxFileSize(files,arg,options){files=toArray(options.files||files);if(exists(files)&&!files.every(function(file){return toNumber(file.size)<=arg})){return"File size must be less or equal %{arg} bytes"}},equalFileSize:function equalFileSize(files,arg,options){files=toArray(options.files||files);if(exists(files)&&!files.every(function(file){return toNumber(file.size)===arg})){return"File size must be equal %{arg} bytes"}},minFileSizeAll:function minFileSizeAll(files,arg,options){files=toArray(options.files||files);if(exists(files)&&!(files.reduce(function(prev,curr){return toNumber(prev.size||prev)+toNumber(curr.size)})>=arg)){return"Total files size must be more or equal %{arg} bytes"}},maxFileSizeAll:function maxFileSizeAll(files,arg,options){files=toArray(options.files||files);if(exists(files)&&!(files.reduce(function(prev,curr){return toNumber(prev.size||prev)+toNumber(curr.size)})<=arg)){return"Total files size must be less or equal %{arg} bytes"}},equalFileSizeAll:function equalFileSizeAll(files,arg,options){files=toArray(options.files||files);if(exists(files)&&!(files.reduce(function(prev,curr){return toNumber(prev.size||prev)+toNumber(curr.size)})===arg)){return"Total files size must be equal %{arg} bytes"}},minFileNameLength:function minFileNameLength(files,arg,options){files=toArray(options.files||files);if(exists(files)&&files.some(function(file){return toArray(file.name).length<arg})){return"File name length must be more or equal %{arg}"}},maxFileNameLength:function maxFileNameLength(files,arg,options){files=toArray(options.files||files);if(exists(files)&&files.some(function(file){return toArray(file.name).length>arg})){return"File name length must be less or equal %{arg}"}},alwaysValid:function alwaysValid(){},alwaysInvalid:function alwaysInvalid(){return"Any value is invalid"}};var util={toDateTime:toDateTime,toDate:toDate,isNumber:isNumber,isFunction:isFunction,isInteger:isInteger,isBoolean:isBoolean,isArray:isArray,isDateTime:isDateTime,isString:isString,isObject:isObject,isPlainObject:isPlainObject,isDefined:isDefined,isUndefinedOrNull:isUndefinedOrNull,isEmpty:isEmpty,exists:exists,contains:contains,toArray:toArray,toNumber:toNumber,toString:toString,toObject:toObject,byteLength:byteLength};function toDate(date){return toDateTime(date,{noTime:true})}function isNumber(value){return typeof value==="number"&&!isNaN(value)}function isFunction(value){return typeof value==="function"}function isInteger(value){return isNumber(value)&&value%1===0}function isBoolean(value){return typeof value==="boolean"}function isArray(value){return Array.isArray(value)}function isDateTime(value){return!isArray(value)&&!isNaN(Date.parse(value))}function isString(value){return typeof value==="string"}function isObject(obj){return obj===Object(obj)}function isPlainObject(value){return(typeof value==="undefined"?"undefined":_typeof(value))=="object"&&value!==null&&!isArray(value)&&!(value instanceof RegExp)&&!(value instanceof Date)&&!(value instanceof Error)&&!(value instanceof Number)&&!(value instanceof String)&&!(value instanceof Boolean)&&(typeof value.toDateTime!=="function"||value.propertyIsEnumerable("toDateTime"))}function isDefined(obj){return obj!==undefined}function isUndefinedOrNull(obj){return obj==null}function isEmpty(value){if(value===null||typeof value==="number"&&isNaN(value)){return true}if(isString(value)){return/^\s*$/.test(value)}if(isArray(value)){return value.length===0}if(isPlainObject(value)){for(var attr in value){return false}return true}return value instanceof Date&&isNaN(Date.parse(value))}function exists(value){return value!==undefined&&!isEmpty(value)}function contains(collection,value,some){some=some?"some":"every";if(isUndefinedOrNull(collection)){return false}if((typeof value==="undefined"?"undefined":_typeof(value))==="object"){return toArray(value)[some](function(val){return contains(collection,val)})}return toArray(collection).indexOf(value)!==-1}function deepEqual(actual,expected,strict){if(strict!==false){strict=true}if(actual===expected){return true}else if(actual instanceof Date&&expected instanceof Date){return actual.getTime()===expected.getTime()}else if(!actual||!expected||(typeof actual==="undefined"?"undefined":_typeof(actual))!="object"&&(typeof expected==="undefined"?"undefined":_typeof(expected))!="object"){return strict?actual===expected:actual==expected}else{return objEqual(actual,expected,strict)}}function objEqual(a,b,strict){var i,key;if(isUndefinedOrNull(a)||isUndefinedOrNull(b)){return false}if(a.prototype!==b.prototype)return false;try{var ka=Object.keys(a),kb=Object.keys(b)}catch(e){return false}if(ka.length!==kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!=kb[i])return false}for(i=ka.length-1;i>=0;i--){key=ka[i];if(!deepEqual(a[key],b[key],strict))return false}return(typeof a==="undefined"?"undefined":_typeof(a))===(typeof b==="undefined"?"undefined":_typeof(b))}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange="\\u20d0-\\u20f0",rsVarRange="\\ufe0e\\ufe0f";var rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboMarksRange+rsComboSymbolsRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d";var reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")";var reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboMarksRange+rsComboSymbolsRange+rsVarRange+"]");var reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function toArray(value){if(!value){return[]}if(isArray(value)){return value}if(isString(value)){return reHasUnicode.test(value)?string.match(reUnicode)||[]:value.split("")}if(Array.from&&(value.length||value instanceof Map||value instanceof Set||value[Symbol&&Symbol.iterator])){return Array.from(value)}return Object.keys(value)}function toNumber(value){return Number(value)}function toString(value){return value&&!isObject(value)?String(value):""}function toObject(value){return isObject(value)?value:{}}function byteLength(str,options){var stringify=options&&typeof options.stringify==="function"?options.stringify:JSON.stringify;str=str!=null?typeof str==="string"?str:stringify(str):"";var s=str.length;for(var i=str.length-1;i>=0;i--){var code=str.charCodeAt(i);if(code>127&&code<=2047)s++;else if(code>2047&&code<=65535)s+=2}return s}module.exports={validators:validators,util:util}},{"normalize-date":12}],10:[function(require,module,exports){"use strict";var validatorsLibrary=require("./common-validators-library");var validators=require("validators-constructor")();validators.util=validatorsLibrary.util;module.exports=validators.add(validatorsLibrary.validators)},{"./common-validators-library":9,"validators-constructor":13}],11:[function(require,module,exports){(function(global){var LARGE_ARRAY_SIZE=200;var HASH_UNDEFINED="__lodash_hash_undefined__";var MAX_SAFE_INTEGER=9007199254740991
;var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",promiseTag="[object Promise]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reFlags=/\w*$/;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;function addMapEntry(map,pair){map.set(pair[0],pair[1]);return map}function addSetEntry(set,value){set.add(value);return set}function arrayEach(array,iteratee){var index=-1,length=array?array.length:0;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array?array.length:0;if(initAccum&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}function getValue(object,key){return object==null?undefined:object[key]}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!="function"){try{result=!!(value+"")}catch(e){}}return result}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root["__core-js_shared__"];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Buffer=moduleExports?root.Buffer:undefined,Symbol=root.Symbol,Uint8Array=root.Uint8Array,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice;var nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeKeys=overArg(Object.keys,Object);var DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create");var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){data.push([key,value])}else{data[index][1]=value}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key)["delete"](key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function Stack(entries){this.__data__=new ListCache(entries)}function stackClear(){this.__data__=new ListCache}function stackDelete(key){return this.__data__["delete"](key)}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);return this}cache=this.__data__=new MapCache(pairs)}cache.set(key,value);return this}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var result=isArray(value)||isArguments(value)?baseTimes(value.length,String):[];var length=result.length,skipIndexes=!!length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isIndex(key,length)))){result.push(key)}}return result}function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){object[key]=value}}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseClone(value,isDeep,isFull,customizer,key,object,stack){var result;if(customizer){result=object?customizer(value,key,object,stack):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result)}}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value)){return cloneBuffer(value,isDeep)}if(tag==objectTag||tag==argsTag||isFunc&&!object){if(isHostObject(value)){return object?value:{}}result=initCloneObject(isFunc?{}:value);if(!isDeep){return copySymbols(value,baseAssign(result,value))}}else{if(!cloneableTags[tag]){return object?value:{}}result=initCloneByTag(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked){return stacked}stack.set(value,result);if(!isArr){var props=isFull?getAllKeys(value):keys(value)}arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue(result,key,baseClone(subValue,isDeep,isFull,customizer,key,value,stack))});return result}function baseCreate(proto){return isObject(proto)?objectCreate(proto):{}}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){return objectToString.call(value)}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!="constructor"){result.push(key)}}return result}function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice()}var result=new buffer.constructor(buffer.length);buffer.copy(result);return result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),true):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result}function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),true):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}function copyObject(source,props,object,customizer){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;assignValue(object,key,newValue===undefined?source[key]:newValue)}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}var getSymbols=nativeGetSymbols?overArg(nativeGetSymbols,Object):stubArray;var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag){getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):undefined;if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}}return result}}function initCloneArray(array){var length=array.length,result=array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate(getPrototype(object)):{}}function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:return cloneSymbol(object)}}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function cloneDeep(value){return baseClone(value,true,true)}function eq(value,other){return value===other||value!==value&&other!==other}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}var isArray=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}var isBuffer=nativeIsBuffer||stubFalse;function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&typeof value=="object"}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function stubArray(){return[]}function stubFalse(){return false}module.exports=cloneDeep}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],12:[function(require,module,exports){"use strict";function setTimezoneOffset(date){date.setMinutes(date.getMinutes()-date.getTimezoneOffset())}function normalizeDateTime(date){if(!date){return new Date(date)}if(arguments.length>1){date=Array.prototype.slice.call(arguments)}if(Array.isArray(date)){date=new(Function.prototype.bind.apply(Date,[null].concat(date)))}var jsDate=new Date(date);if(date===Object(date)){var momentBaseDate=date.creationData&&date.creationData().input;if(!(momentBaseDate&&(typeof momentBaseDate==="number"||typeof momentBaseDate==="string"&&/:.+Z|GMT|[+-]\d\d:\d\d/.test(momentBaseDate)))){setTimezoneOffset(jsDate)}return jsDate}if(!isNaN(jsDate)&&typeof date==="string"){if(date.match(/Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec/)&&date.indexOf("GMT")===-1){setTimezoneOffset(jsDate)}}else{jsDate=new Date(Number(String(date).split(".").join("")))}return jsDate}function normalizeDate(date,options){date=normalizeDateTime(date);return(options||{}).noTime?new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate()):date}module.exports=normalizeDate},{}],13:[function(require,module,exports){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};var FORMAT_REGEXP=/(%?)%\{([^\}]+)\}/g;var MESSAGE_REGEXP=/message/i;var hiddenPropertySettings={enumerable:false,configurable:false,writable:true};var RESULT_HANDLER="resultHandler";var EXCEPTION_HANDLER="exceptionHandler";var ERROR_FORMAT="errorFormat";var MESSAGE="message";var SIMPLE_ARGS_FORMAT="simpleArgsFormat";var ONE_OPTIONS_ARG="oneOptionsArg";var ARG="arg";function validatorWrapper(validators,name,validator){return function(value,options){var error=void 0,args=arguments;var alias=this&&this.alias;var validatorObj=validators[name];var validatorAliasObj=alias?validators[alias]:{};var arg=validatorObj[ARG]||validatorAliasObj[ARG]||validators[ARG];var isSimpleArgsFormat=validatorObj[SIMPLE_ARGS_FORMAT]||validatorAliasObj[SIMPLE_ARGS_FORMAT]||validators[SIMPLE_ARGS_FORMAT];options=assign({},validatorObj.defaultOptions,validatorAliasObj.defaultOptions,options);if(typeof options.parse==="function"){value=options.parse(value)}if(options.hasOwnProperty(arg)&&!isSimpleArgsFormat){args=[value,options[arg]].concat(Array.prototype.slice.call(arguments,1))}try{var resultHandler=validatorObj[RESULT_HANDLER]||validatorAliasObj[RESULT_HANDLER]||validators[RESULT_HANDLER];error=resultHandler(validator.apply(validators,args))}catch(err){var exceptionHandler=validatorObj[EXCEPTION_HANDLER]||validatorAliasObj[EXCEPTION_HANDLER]||validators[EXCEPTION_HANDLER];if(typeof exceptionHandler==="function"){error=exceptionHandler(err)}else{throw err}}function handleError(error){if(error){var _ret=function(){var errorObj=(typeof error==="undefined"?"undefined":_typeof(error))==="object"?error:null;var message=options[MESSAGE]||validatorObj[MESSAGE]||validatorAliasObj[MESSAGE];if(message){error=message}var formattedErrorMessage=validators.formatMessage(error,assign({validator:alias||name,value:value},errorObj,options));var format=validatorObj[ERROR_FORMAT]||validatorAliasObj[ERROR_FORMAT]||validators[ERROR_FORMAT];if(format){if(typeof formattedErrorMessage==="string"){formattedErrorMessage={message:formattedErrorMessage}}if(format.$options){format=assign({},format);Object.keys(options).forEach(function(key){if(!MESSAGE_REGEXP.test(key)&&typeof options[key]!=="function"){format[key]=options[key]}})}delete format.$options;if(format.$origin){format=assign({},format,formattedErrorMessage)}delete format.$origin;return{v:validators.formatMessage(format,assign({validator:alias||name,value:value},options,formattedErrorMessage))}}return{v:formattedErrorMessage}}();if((typeof _ret==="undefined"?"undefined":_typeof(_ret))==="object")return _ret.v}}return(typeof error==="undefined"?"undefined":_typeof(error))==="object"&&typeof error.then==="function"?error.then(handleError):handleError(error)}}function formatStr(str,values){values=values||{};if(typeof str!=="string"){return str}return str.replace(FORMAT_REGEXP,function(m0,m1,m2){return m1==="%"?"%{"+m2+"}":values[m2]})}function isPlainObject(value){return{}.toString.call(value)==="[object Object]"&&(typeof value.toDate!=="function"||value.propertyIsEnumerable("toDate"))}function assign(){for(var i=1;i<arguments.length;i++){for(var k in arguments[i]){if(arguments[i].hasOwnProperty(k))arguments[0][k]=arguments[i][k]}}return arguments[0]}function Validators(params){Object.defineProperties(this,{errorFormat:hiddenPropertySettings,formatStr:hiddenPropertySettings,resultHandler:hiddenPropertySettings,exceptionHandler:hiddenPropertySettings,arg:hiddenPropertySettings,simpleArgsFormat:hiddenPropertySettings,oneOptionsArg:hiddenPropertySettings,util:hiddenPropertySettings});this.errorFormat={error:"%{validator}",message:"%{message}",$options:true,$origin:true};this.formatStr=formatStr;this.resultHandler=function(result){return result};this.arg="arg";this.util={};assign(this,params)}function addValidator(name,validator,params){var _this=this;var validators=validator instanceof Array?validator:[validator];var validate=void 0;if(typeof validator==="string"){validate=function validate(){return _this[validator].apply({alias:name,_this:_this},arguments)}}else{validate=function validate(value){var args=Array.prototype.slice.call(arguments,2);var arg1=arguments[1];var arg2=arguments[2];var _this2=this&&this._this||_this;var isSimpleArgsFormat=_this2[name][SIMPLE_ARGS_FORMAT]||_this2[SIMPLE_ARGS_FORMAT];var isOneOptionsArg=_this2[name][ONE_OPTIONS_ARG]||_this2[ONE_OPTIONS_ARG];var options=!isOneOptionsArg&&isPlainObject(arg2)?arg2:{};if(arg1!=null&&typeof arg1!=="boolean"){if(isPlainObject(arg1)){options=arg1}else{options[_this2[name][ARG]||_this2[ARG]]=arg1;if(!isSimpleArgsFormat){args.shift()}}}for(var i=0;i<validators.length;i++){var base=validators[i];switch(typeof base==="undefined"?"undefined":_typeof(base)){case"function":validator=validatorWrapper(_this2,name,base);break;case"string":validator=_this2[base];break;case"object":validator=_this2[base[0]];options=assign({},options,base[1])}var error=validator.apply(this,[value,options].concat(args));if(error){return error}}}}assign(validate,params);validate.curry=function(){var _arguments=arguments;return function(value){return validate.apply(_this,[value].concat(Array.prototype.slice.call(_arguments)))}};_this[name]=validate}Validators.prototype.add=function(validatorName,validators,params){var _this3=this;if(typeof validatorName==="string"){addValidator.call(this,validatorName,validators,params)}else{Object.keys(validatorName).forEach(function(key){return addValidator.call(_this3,key,validatorName[key],validators)})}return this};Validators.prototype.formatMessage=function(message,values){var _this4=this;if(typeof message==="function"){message=message(values.value,values)}if((typeof message==="undefined"?"undefined":_typeof(message))==="object"){var formattedMessage={};Object.keys(message).forEach(function(key){return formattedMessage[_this4.formatStr(key,values)]=_this4.formatStr(message[key],values)});if(message[MESSAGE]){formattedMessage[MESSAGE]=this.formatStr(message[MESSAGE],values)}return formattedMessage}return this.formatStr(message,values)};module.exports=function(options){return new Validators(options)}},{}],14:[function(require,module,exports){"use strict";exports.flat=require("./formatters/flat");exports.nested=require("./formatters/nested")},{"./formatters/flat":15,"./formatters/nested":16}],15:[function(require,module,exports){"use strict";function flatten(object){var path=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var flatObject=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};Object.keys(object).forEach(function(propertyName){var propertyValue=object[propertyName];if(propertyValue instanceof Object&&!(propertyValue instanceof Array)){flatten(propertyValue,path+propertyName+".",flatObject)}else{flatObject[path+propertyName]=propertyValue}});return flatObject}module.exports=function(object){return flatten(object)}},{}],16:[function(require,module,exports){"use strict";module.exports=function(errors){return errors}},{}],17:[function(require,module,exports){"use strict";var validateObject=require("./validateObject");var ValidationError=require("./validationError");var formatters=require("./formatters");var DEFAULT_OPTIONS={format:"flat",reject:false};module.exports=function(object,schema){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};options=Object.assign({},DEFAULT_OPTIONS,options);return new Promise(function(resolve,reject){var formatter=formatters[options.format];if(!formatter){return reject(new Error("Unknown format "+options.format))}validateObject(object,schema,object,[]).then(function(validationErrors){if(!validationErrors){return resolve()}var formattedErrors=formatter(validationErrors);if(options.reject){reject(new ValidationError(formattedErrors))}else{resolve(formattedErrors)}}).catch(reject)})}},{"./formatters":14,"./validateObject":18,"./validationError":21}],18:[function(require,module,exports){"use strict";var validateProperty=require("./validateProperty");module.exports=function(object,schema,fullObject,path){var validationPromises=[];var validationErrors={};Object.keys(schema).forEach(function(propertyName){if(propertyName.startsWith("$")){return}var propertyValue=object[propertyName];var propertyPath=path.concat(propertyName);var propertySchema=schema[propertyName];if(propertySchema instanceof Function){propertySchema=propertySchema(propertyValue,object,fullObject,propertyPath)}if(propertySchema instanceof Object){var validationPromise=validateProperty(propertyValue,propertySchema,object,fullObject,propertyPath);validationPromise.then(function(validationError){if(validationError){validationErrors[propertyName]=validationError}});validationPromises.push(validationPromise)}});return Promise.all(validationPromises).then(function(){if(Object.keys(validationErrors).length){return validationErrors}})}},{"./validateProperty":19}],19:[function(require,module,exports){"use strict";var validateValue=require("./validateValue");module.exports=function(value,schema,object,fullObject,path){var validatorsOptions=schema.$validate;if(validatorsOptions instanceof Function){validatorsOptions=validatorsOptions(value,object,fullObject,path)}var promise=validatorsOptions instanceof Object?validateValue(value,validatorsOptions,object,fullObject,path):Promise.resolve();return promise.then(function(validationErrors){if(validationErrors){return validationErrors}var validateObject=require("./validateObject");if((schema.$items||schema[0])&&value!==undefined){if(!(value instanceof Array)){return Promise.resolve([{error:"array",message:"must be an array"}])}var propertiesSchema={};var itemSchema=schema.$items||schema[0];value.forEach(function(item,index){return propertiesSchema[index]=itemSchema});return validateObject(value,propertiesSchema,fullObject,path)}else if(Object.keys(schema).some(function(propertyName){return!propertyName.startsWith("$")})&&value!==undefined){if(!(value instanceof Object)){return Promise.resolve([{error:"object",message:"must be an object"}])}return validateObject(value,schema,fullObject,path)}})}},{"./validateObject":18,"./validateValue":20}],20:[function(require,module,exports){"use strict";var validators=require("./validators");module.exports=function(value,validatorsOptions,object,fullObject,path){var validatorsResultsPromises=[];var validationErrors=[];Object.keys(validatorsOptions).forEach(function(validatorName){var validator=validators[validatorName];if(!validator){throw new Error("Unknown validator "+validatorName)}var validatorOptions=validatorsOptions[validatorName];if(validatorOptions instanceof Function){validatorOptions=validatorOptions(value,object,fullObject,path)}if(validatorOptions===false||validatorOptions===null||validatorOptions===undefined){return}var validatorResult=validator(value,validatorOptions,object,fullObject,path);var validatorResultPromise=Promise.resolve(validatorResult);validatorResultPromise.then(function(validationError){if(validationError){validationErrors.push(validationError)}});validatorsResultsPromises.push(validatorResultPromise)});return Promise.all(validatorsResultsPromises).then(function(){if(validationErrors.length){return validationErrors}})}},{"./validators":22}],21:[function(require,module,exports){"use strict";function ValidationError(errors){Error.call(this);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}this.name=this.constructor.name;this.errors=errors}ValidationError.prototype=Object.create(Error.prototype);module.exports=ValidationError},{}],22:[function(require,module,exports){"use strict";var validators=require("common-validators");validators.oneOptionsArg=true;var originalAdd=validators.add;validators.add=function(validatorName,validator){if(validatorName instanceof Object){return originalAdd.call(validators,validatorName,{simpleArgsFormat:true})}originalAdd.call(validators,validatorName,validator,{simpleArgsFormat:true})};validators.confirmOriginal=validators.confirm;validators.add({confirm:function confirm(value,options,object,fullObject,path){var confirmOptions={key:path[path.length-1],comparedKey:options instanceof Object?options.key:options};return this.confirmOriginal(object,confirmOptions)}});module.exports=validators},{"common-validators":10}],23:[function(require,module,exports){"use strict";var validate=require("./validate");validate.validators=require("./validators");validate.formatters=require("./formatters");validate.ValidationError=require("./validationError");module.exports=validate},{"./formatters":14,"./validate":17,"./validationError":21,"./validators":22}]},{},[6])(6)});